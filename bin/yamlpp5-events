#!/usr/bin/perl
use strict;
use warnings;
use 5.010;

use Encode;
use YAML::PP::Parser;

my ($file) = @ARGV;
my $yaml;

if ($file) {
    $yaml = do { open my $fh, '<', $file or die $!; local $/; <$fh> };
}
else {
    $yaml = do { local $/; <STDIN> };
}
$yaml = decode_utf8($yaml);

my $parser = YAML::PP::Parser->new(
  receiver => sub {
    my ($self, @args) = @_;
    say encode_utf8(YAML::PP::Parser->event_to_test_suite(\@args));
  },
);

$parser->parse($yaml);
